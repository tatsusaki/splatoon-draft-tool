# プロジェクト概要：スプラトゥーン用ドラフト支援ツール（GAS）

このプロジェクトは、スプラトゥーンのプライベートマッチ用に使う
「ドラフト支援ツール」（Google Apps Script + Google スプレッドシート）の
コードと仕様を管理し、継続的に改善していくためのものです。

## 技術スタック

- Google Apps Script（GAS）
- Google スプレッドシート
- 必要に応じて HTML Service（ルーレット表示など）

## 現状

- おおよそ 3000 行規模の GAS コード
- 主な機能イメージ
  - プレイヤーの情報管理
  - ドラフト用のチーム分けロジック
  - 観戦者の選出ロジック
  - ルーレットやUI周りの制御
  - 勝敗や履歴の記録

- 問題意識
  - コード量が多く見通しが悪い
  - 関数の責務が広すぎる箇所がある
  - SpreadsheetApp の読み書き回数が多く、ボタンクリック後の待ち時間が長い
  - バグの原因が追いにくい構造になりつつある

## 役割のレイヤー（GASコードを見るときの層）

このプロジェクトのコードは概ね以下の4層に分けて考えます。

- A. データアクセス層（Spreadsheet 操作）
  - シート取得、範囲取得、getValues / setValues など
- B. ドメインロジック（ドラフト・観戦ロジック）
  - プレイヤー情報管理、ドラフト・観戦ロジック、集計など
- C. UI 制御（HTML・ルーレット・ボタンクリック）
  - 画面表示、ルーレット描画、エントリーポイントとなる関数など
- D. ユーティリティ
  - 汎用関数、ログ出力、バリデーションなど

ChatGPT はコードを読むとき・改善案を出すときに、この分類を意識して、
できるだけ責務を適切な層に整理する方向で提案してください。

## このプロジェクトで ChatGPT に求める姿勢

- 外部仕様（ユーザーから見た動作）は変えないこと
- いきなり大規模リライト・全面書き換えはしないこと
- 「調査 → 仮説 → 小さな修正」の順で進めること
- SpreadsheetApp への読み書き回数を減らす方針を優先すること
- 変更前後のコード差分を人間が追える程度の単位に留めること

## ファイル構成の前提

- `src/` 以下に GAS コードを配置
- `docs/` 以下に仕様書や設計メモを配置
- `instructions/` 以下に、ChatGPT が参照するための指示テンプレート群を配置

今後の会話では、必要に応じてこれらのファイルを参照しながら作業します。
